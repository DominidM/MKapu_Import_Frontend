<!-- HEADER -->
<section class="wizard-content p-4">
  <p-card class="header-card">
    <div class="flex align-items-center justify-content-between">
      
      <div class="flex align-items-center gap-3">
        <span class="inventory-title-icon">
          <i class="pi pi-users"></i>
        </span>

        <div>
          <p class="transfer-kicker">Administración</p>
          <h2 class="transfer-title">Listado de Usuarios</h2>
        </div>
      </div>

      <button
        pButton
        icon="pi pi-user-plus"
        label="Nuevo Usuario"
        class="wizard-primary"
        (click)="nuevoUsuario()"
      ></button>

    </div>
  </p-card>
</section>

<!-- BUSCADOR -->
<section class="wizard-content mt-3">
  <p-card>
    <h4 class="mb-3">Buscar Usuario</h4>

    <div class="flex align-items-center gap-3">
      <input
        pInputText
        type="text"
        maxlength="8"
        placeholder="Ingrese DNI (8 dígitos)..."
        [(ngModel)]="filtroDni"
        class="w-full"
      />

      <button
        pButton
        icon="pi pi-filter-slash"
        label="Limpiar"
        severity="danger"
      ></button>
    </div>
  </p-card>
</section>

<!-- TABLA -->
<section class="wizard-content mt-4">
  <p-card>
    <div class="flex align-items-center gap-2 mb-3">
      <i class="pi pi-user"></i>
      <strong>Usuarios</strong>
      <p-tag 
        *ngIf="totalusers > 0"
        [value]="totalusers + ' Usuarios'"
        severity="info"
      ></p-tag>
    </div>

    <p-table
      [value]="users"
      responsiveLayout="scroll"
      class="p-datatable-sm"
      [rows]="5"
      [paginator]="true"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Usuario</th>
          <th>Rol</th>
          <th>Sede</th>
          <th>Estado</th>
          <th style="width: 80px">Acciones</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-user>
        <tr>
          <td>
            <strong>{{ user.usu_nom }}</strong>
            <div class="helper-text">DNI: {{ user.dni }}</div>
          </td>

          <td>{{ user.rol_nombre || 'Sin rol' }}</td>
          <td>{{ user.sedeNombre || 'N/A' }}</td>

          <td>
            <p-tag
              [value]="user.activo ? 'Activo' : 'Inactivo'"
              [severity]="user.activo ? 'success' : 'danger'"
            ></p-tag>
          </td>

          <td class="text-center">
            <button
              pButton
              icon="pi pi-eye"
              class="p-button-text p-button-sm"
            ></button>
          </td>
        </tr>
      </ng-template>
      
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="5" class="text-center">No hay usuarios registrados</td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</section>
