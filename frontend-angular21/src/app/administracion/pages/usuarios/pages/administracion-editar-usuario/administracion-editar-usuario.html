<p-toast position="top-right"></p-toast>

<section class="edit-user-page">
  <div class="p-2 pt-5 md:pt-2">
    <p-card class="edit-user-header-card">
      <div class="edit-user-header-row">
        <div class="edit-user-header-title">
          <span class="edit-user-title-icon">
            <i class="pi pi-user-edit"></i>
          </span>
          <div>
            <p class="edit-user-kicker mb-0">ADMINISTRACIÓN · USUARIOS</p>
            <h2 class="edit-user-title mb-0">EDITAR USUARIO</h2>
            <div class="edit-user-meta">
              <span class="edit-user-chip">
                <i class="pi pi-check"></i>
                En edición
              </span>
              <span>Datos principales</span>
            </div>
          </div>
        </div>
        <div class="edit-user-header-actions">
          <button
            pButton
            type="button"
            label="Volver"
            icon="pi pi-arrow-left"
            class="p-button-outlined"
            [routerLink]="['/admin/usuarios']">
          </button>
        </div>
      </div>
    </p-card>
  </div>

  <div class="p-2">
    <p-card class="edit-user-form-card">
    <div class="edit-user-section">
      <div class="edit-user-section-header">
        <div class="edit-user-section-title">
          <i class="pi pi-id-card"></i>
          <h3>Datos principales</h3>
        </div>
        <button
          pButton
          type="button"
          label="Actualizar usuario"
          icon="pi pi-save"
          class="p-button-warning edit-user-update-btn"
          (click)="actualizarUsuarioCompleto()">
        </button>
      </div>
      <div class="edit-user-content">
        <div class="edit-user-grid">
          <div class="edit-user-field-icon">
            <span class="edit-user-icon-lg">
              <i class="pi pi-user"></i>
            </span>
            <div class="edit-user-field">
              <label>Nombre</label>
              <input pInputText class="w-full" [(ngModel)]="testUpdateForm.usu_nom" />
            </div>
          </div>

          <div class="edit-user-field-icon">
            <span class="edit-user-icon-lg">
              <i class="pi pi-phone"></i>
            </span>
            <div class="edit-user-field">
              <label>Celular</label>
              <input pInputText class="w-full" [(ngModel)]="testUpdateForm.celular" />
            </div>
          </div>

          <div class="edit-user-field-icon edit-user-field-wide">
            <span class="edit-user-icon-lg">
              <i class="pi pi-map-marker"></i>
            </span>
            <div class="edit-user-field">
              <label>Dirección</label>
              <input pInputText class="w-full" [(ngModel)]="testUpdateForm.direccion" />
            </div>
          </div>

          <div class="edit-user-field-icon">
            <span class="edit-user-icon-lg">
              <i class="pi pi-check-circle"></i>
            </span>
            <div class="edit-user-field">
              <label>Estado</label>
              <p-select
                class="w-full"
                [options]="[{ label: 'Activo', value: true }, { label: 'Inactivo', value: false }]"
                optionLabel="label"
                optionValue="value"
                [(ngModel)]="testUpdateForm.activo">
              </p-select>
            </div>
          </div>
        </div>

        <aside class="edit-user-aside">
          <div class="edit-user-aside-card">
            <div class="edit-user-aside-header">
              <span class="edit-user-aside-icon">
                <i class="pi pi-user"></i>
              </span>
              <div>
                <p class="edit-user-aside-title">Resumen rápido</p>
                <span class="edit-user-aside-subtitle">Verifica antes de actualizar</span>
              </div>
            </div>

            <div class="edit-user-aside-row">
              <span>Nombre</span>
              <strong>{{ testUpdateForm.usu_nom || 'Sin nombre' }}</strong>
            </div>
            <div class="edit-user-aside-row">
              <span>Celular</span>
              <strong>{{ testUpdateForm.celular || '-' }}</strong>
            </div>
            <div class="edit-user-aside-row">
              <span>Dirección</span>
              <strong>{{ testUpdateForm.direccion || '-' }}</strong>
            </div>
            <div class="edit-user-aside-row">
              <span>Estado</span>
              <strong
                class="edit-user-aside-status"
                [class.is-active]="testUpdateForm.activo"
                [class.is-inactive]="!testUpdateForm.activo">
                {{ testUpdateForm.activo ? 'Activo' : 'Inactivo' }}
              </strong>
            </div>

            <div class="edit-user-aside-hint">
              <i class="pi pi-info-circle"></i>
              <span>Los cambios se verán reflejados inmediatamente.</span>
            </div>
          </div>
        </aside>
      </div>
    </div>
    </p-card>
  </div>
</section>
