<div class="agregar-categoria-page">
  <p-toast position="top-right"></p-toast>
  <p-confirmDialog appendTo="body"></p-confirmDialog>

  <p-card styleClass="sedes-header-card">
    <div class="flex align-items-center justify-content-between flex-wrap gap-3">
      <div class="flex align-items-center gap-3">
        <span class="sedes-title-icon"><i class="pi pi-tag"></i></span>
        <div>
          <p class="sedes-kicker">ADMINISTRADOR - ADMINISTRACIÓN - CREAR CATEGORÍA</p>
          <h2 class="sedes-title">CREAR CATEGORÍA</h2>
        </div>
      </div>
    </div>
  </p-card>

  <div class="mb-3">
    <p-message *ngIf="loading()" severity="info" text="Procesando..."></p-message>
    <p-message *ngIf="!loading() && error() as e" severity="error" [text]="e"></p-message>
  </div>

  <p-card styleClass="sede-card border-none">
    <form #categoriaForm="ngForm" novalidate (ngSubmit)="saveCategoria(categoriaForm)">

      <div class="sede-section">
        <div class="sede-section-title">INFORMACIÓN DE LA CATEGORÍA:</div>
        <p-divider></p-divider>
      </div>

      <div class="grid form-grid">

        <!-- NOMBRE -->
        <div class="col-12 md:col-6">
          <label for="nombre">NOMBRE <span style="color:#f87171">*</span></label>
          <input
            id="nombre"
            pInputText
            class="w-full"
            placeholder="Ingrese nombre"
            [(ngModel)]="categoria.nombre"
            name="nombre"
            required
            #nombre="ngModel"
            (input)="toUpperCase('nombre'); onNombreChange(categoria.nombre)"
            (keypress)="onlyLetters($event)"
            [ngClass]="{ 'p-invalid': (categoriaForm.submitted || nombre.touched) && nombre.invalid }"
          />
          <p-message
            *ngIf="(categoriaForm.submitted || nombre.touched) && nombre.invalid"
            severity="error"
            [text]="getNombreErrorText()"
          />
        </div>

        <!-- DESCRIPCIÓN -->
        <div class="col-12 md:col-6">
          <label for="descripcion">DESCRIPCIÓN</label>
          <input
            id="descripcion"
            pInputText
            class="w-full"
            placeholder="Ingrese descripción"
            [(ngModel)]="categoria.descripcion"
            name="descripcion"
            #descripcion="ngModel"
            (input)="toUpperCase('descripcion')"
          />
        </div>

      </div>

      <p-divider></p-divider>

      <div class="flex align-items-center justify-content-center gap-3 mt-3">
        <p-button
          label="Cancelar"
          outlined
          severity="secondary"
          styleClass="sede-btn-cancel"
          type="button"
          (click)="confirmCancel()">
        </p-button>

        <p-button
          label="Registrar Categoría"
          icon="pi pi-check"
          styleClass="sede-btn-primary"
          type="submit"
          [disabled]="categoriaForm.invalid || loading()">
        </p-button>
      </div>

    </form>
  </p-card>
</div>